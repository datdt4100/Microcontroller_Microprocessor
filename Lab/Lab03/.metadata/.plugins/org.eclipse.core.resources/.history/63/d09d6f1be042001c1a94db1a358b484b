/*
 * input_processing.c
 *
 *  Created on: 28 Oct 2021
 *      Author: TRAN DAT
 */
#include "input_processing.h"
enum MODE_STATE
{
	NORMAL,
	MODIFY_LED_RED,
	MODIFY_LED_YELLOW
};

enum MODE_STATE MODE;
uint8_t idxLED = 0;

void Traffic_System_Init()
{
	setTimer7SegLED(50);
	setTimerTrafficLED(50);
	MODE = NORMAL;
}

void fsm_input_button()
{
	switch (MODE)
	{
	case NORMAL:
		HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_1 << timerTrafficLED_flag);
		HAL_Delay(1000);
		if (timerTrafficLED_flag == 1)
		{
			traffic_update();
			Led7SegBuffer_update();
			setTimerTrafficLED(100);
		}
		if (timer7SegLED_flag == 1)
		{
			Led7Seg_update(idxLED);
			idxLED = 1 - idxLED;
			setTimer7SegLED(250);
		}
		break;
	case MODIFY_LED_RED:
		break;
	case MODIFY_LED_YELLOW:
		break;
	}
}

